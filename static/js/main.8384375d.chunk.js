(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(18),c=a.n(l),i=a(22),o=a(11),s=a(3),u=a(15),d=a(4),m=a(5),p=a(6),h=a(7),b=(a(42),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.label,a=e.type,n=e.name,l=e.value,c=e.onChange;return r.a.createElement("label",{htmlFor:n},t,r.a.createElement("input",{"data-testid":"".concat(n,"-input"),type:a,name:n,id:n,value:l,onChange:c}))}}]),a}(r.a.Component)),E=b,f=a(2),v=a(17),j=a(24),O="ADD_USER_EMAIL",y="GET_CURRENCIES",g="ADD_EXPENSES",C="DELETE_EXPENSES",x="SET_EDIT",w="EDIT_EXPENSE",k=function(e){return{type:O,payload:e}},S=function(e){return{type:y,payload:e}},N=function(e,t,a){return{type:g,payload:Object(f.a)(Object(f.a)({id:e},t),{},{exchangeRates:a})}},T=function(e,t){return function(){var a=Object(j.a)(Object(v.a)().mark((function a(n){var r,l;return Object(v.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return"https://economia.awesomeapi.com.br/json/all",a.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return r=a.sent,a.next=6,r.json();case 6:l=a.sent,n(N(e,t,l));case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},D=function(e){return{type:w,payload:Object(f.a)({},e)}},A=(a(43),a.p+"static/media/carteira.5d6763c3.png"),R=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",disabled:!0},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(u.a)({},n,r),(function(){e.formValidation()}))},e.formValidation=function(){var t=e.state,a=t.email,n=t.password,r=a.match(/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/),l=n.length>=6;r&&l?e.setState({disabled:!1}):e.setState({disabled:!0})},e.handleSubmit=function(){var t=e.props,a=t.history,n=t.dispatch,r=e.state.email;n(k(r)),a.push("/carteira")},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.disabled;return r.a.createElement("div",{className:"form-container"},r.a.createElement("form",{className:"form-login"},r.a.createElement("img",{src:A,alt:"Desenho de uma carteira",className:"wallet"}),r.a.createElement("p",null,"Fa\xe7a seu login!"),r.a.createElement(E,{"data-testid":"email-input",label:"E-mail: ",type:"email",name:"email",value:t,onChange:this.handleChange}),r.a.createElement(E,{"data-testid":"password-input",label:"Senha: ",type:"password",name:"password",value:a,onChange:this.handleChange}),r.a.createElement("button",{className:"button",type:"button",disabled:n,onClick:this.handleSubmit},"Entrar")))}}]),a}(r.a.Component),F=Object(o.b)()(R),M=(a(44),a.p+"static/media/perfil.f0f4eaa8.png"),_=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).calTotalExpenses=function(){var t=e.props.expenses.reduce((function(e,t){return e+t.value*t.exchangeRates[t.currency].ask}),0);return(Math.floor(100*t)/100).toFixed(2)},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.email;return r.a.createElement("div",null,r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"title-container"},r.a.createElement("img",{className:"wallet",src:A,alt:"Desenho de uma carteira"}),r.a.createElement("h2",{className:"header-title"},"TR",r.a.createElement("span",null,"Y"),"BE WALLET")),r.a.createElement("div",{className:"wallet-container"},r.a.createElement("div",{className:"wallet-email"},r.a.createElement("img",{className:"user-image",src:M,alt:"Imagem de perfil"}),r.a.createElement("p",{className:"user-email","data-testid":"email-field"},e)),r.a.createElement("div",{className:"wallet-funds"},"R$:",r.a.createElement("span",{className:"user-funds","data-testid":"total-field"},this.calTotalExpenses()),r.a.createElement("span",{"data-testid":"header-currency-field"},"BRL")))))}}]),a}(r.a.Component),I=Object(o.b)((function(e){return{email:e.user.email,expenses:e.wallet.expenses}}))(_),L=(a(45),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.label,a=e.options,n=e.name,l=e.value,c=e.onChange;return r.a.createElement("label",{htmlFor:n},t,r.a.createElement("select",{className:"select","data-testid":"".concat(n,"-input"),name:n,id:n,value:l,onChange:c},a.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))))}}]),a}(r.a.Component)),z=L,V=(a(46),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleClickEdit=function(t){var a=e.props,n=a.setEdit,r=a.handleClickSetState,l=a.expenses;n(t),r(l.find((function(e){return e.id===t})))},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.expenses,n=t.deleteExpense;return r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir"))),r.a.createElement("tbody",null,a.map((function(t){var a=t.currency,l=t.description,c=t.exchangeRates,i=t.id,o=t.method,s=t.tag,u=t.value;return r.a.createElement("tr",{key:i},r.a.createElement("td",null,l),r.a.createElement("td",null,s),r.a.createElement("td",null,o),r.a.createElement("td",null,parseFloat(u).toFixed(2)),r.a.createElement("td",null,c[a].name.replace("/Real Brasileiro","")),r.a.createElement("td",null,parseFloat(c[a].ask).toFixed(2)),r.a.createElement("td",null,(Math.floor(u*c[a].ask*100)/100).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{className:"edit-button","data-testid":"edit-btn",type:"button",onClick:function(){return e.handleClickEdit(i)}},"Editar"),r.a.createElement("button",{className:"delete-button","data-testid":"delete-btn",type:"button",onClick:function(){return n(i)}},"Excluir")))}))))}}]),a}(r.a.Component)),B=Object(o.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{deleteExpense:function(t){return e(function(e){return{type:C,payload:e}}(t))},setEdit:function(t){return e(function(e){return{type:x,payload:e}}(t))}}}))(V),P=(a(47),["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"]),U=["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"],X={id:0,value:0,description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},Z=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state=X,e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(u.a)({},n,r))},e.handleClickAdd=function(){var t=e.props.dispatch,a=e.state.id;t(T(a,e.state)),e.setState((function(e){return Object(f.a)(Object(f.a)({},X),{},{id:e.id+1})}))},e.handleClickEdit=function(t){(0,e.props.dispatch)(D(t)),e.setState((function(e){return Object(f.a)(Object(f.a)({},X),{},{id:e.id})}))},e.handleClickSetState=function(t){e.setState((function(e){return Object(f.a)(Object(f.a)({},t),{},{id:e.id})}))},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.value,n=t.description,l=t.currency,c=t.method,i=t.tag,o=this.props,s=o.currencies,u=o.editor,d={id:o.idToEdit,value:a,description:n,currency:l,method:c,tag:i};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form"},r.a.createElement(E,{"data-testid":"value-input",label:"Valor: ",type:"number",name:"value",value:a,onChange:this.handleChange}),r.a.createElement(E,{"data-testid":"description-input",label:"Descri\xe7\xe3o: ",type:"text",name:"description",value:n,onChange:this.handleChange}),r.a.createElement(z,{label:"Moeda: ",options:s,name:"currency",value:l,onChange:this.handleChange}),r.a.createElement(z,{label:"M\xe9todo de pagamento: ",options:P,name:"method",value:c,onChange:this.handleChange}),r.a.createElement(z,{label:"Categoria: ",options:U,name:"tag",value:i,onChange:this.handleChange}),u?r.a.createElement("button",{type:"button",onClick:function(){return e.handleClickEdit(d)}},"Editar despesa"):r.a.createElement("button",{type:"button",onClick:this.handleClickAdd},"Adicionar despesa")),r.a.createElement("div",null,r.a.createElement(B,{handleClickSetState:this.handleClickSetState})))}}]),a}(r.a.Component);Z.defaultProps={editor:!1,idToEdit:0};var $=Object(o.b)((function(e){return{currencies:e.wallet.currencies,editor:e.wallet.editor,idToEdit:e.wallet.idToEdit}}))(Z),J=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(function(){var e=Object(j.a)(Object(v.a)().mark((function e(t){var a,n,r;return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,r=Object.keys(n).filter((function(e){return"USDT"!==e})),t(S(r));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(I,null),r.a.createElement($,null))}}]),a}(r.a.Component),W=Object(o.b)()(J);a(48);var G=function(){return r.a.createElement("div",null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:F}),r.a.createElement(s.a,{path:"/carteira",component:W})))},Y=a(13),q=a(31),H=a(32),K={email:""},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;return t.type===O?Object(f.a)(Object(f.a)({},e),{},{email:t.payload}):e},ee=a(33),te={currencies:[],expenses:[],editor:!1,idToEdit:0},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(f.a)(Object(f.a)({},e),{},{currencies:t.payload});case g:return Object(f.a)(Object(f.a)({},e),{},{expenses:[].concat(Object(ee.a)(e.expenses),[t.payload])});case C:return Object(f.a)(Object(f.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==t.payload}))});case x:return Object(f.a)(Object(f.a)({},e),{},{editor:!0,idToEdit:t.payload});case w:return Object(f.a)(Object(f.a)({},e),{},{expenses:e.expenses.map((function(e){return e.id!==t.payload.id?e:Object(f.a)(Object(f.a)({},e),t.payload)})),editor:!1,idToEdit:0});default:return e}},ne=Object(Y.combineReducers)({user:Q,wallet:ae}),re=Object(Y.createStore)(ne,Object(q.composeWithDevTools)(Object(Y.applyMiddleware)(H.a)));c.a.render(r.a.createElement(o.a,{store:re},r.a.createElement(i.a,null,r.a.createElement(G,null))),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.8384375d.chunk.js.map